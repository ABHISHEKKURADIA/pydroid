Scripts for developers
======================

Warning: This scripts are mostly helpers for faster pydroid development, but not usefull for app development (unless you have to recompile python or other libraries). **Some scripts require adaptions of pathes to your system to work and may delete pydroid related files or directories. So always have a look at them before using them!**


Installation helpers for pydroid developers
-------------------------------------------

### install_pydroid_editable.py

Use this installation method if you want to modify and test pydroid.
Previous installations get removed automatically.
Pydroid will then get the source from this directories instead of finding them automatically in dist-packages directory after an installation with setup.py.

Installs pydroid on this system as setup.py would do it with 3 differences:
  - pydroid source code comes not from python dist-packages, but from this local copy of the pydroid git repo
  - accessing pydroid via python API is not possible unless you add the directory pydroid/src to sys.path
  - bash autocompletion won't work after this installation method

Example usage:

    ./install_pydroid_editable.py


### install_pydroid_not_editable.py

Use this installation method if you want to install pydroid using setup.py.
Previous installations will get removed automatically.
The pydroid source code will not be editabel and testable after.

Example usage:

    ./install_pydroid_not_editable.py


### remove_pydroid_installation.sh

Removes previous installation of pydroid (if installed via setup.py) if any.
Creates a backup of the deploy.conf file for later restore.

Example usage:

    ./remove_pydroid_installation.sh


Compile Python or other Libraries with kivy
-------------------------------------------

### compile_pyjnius_and_create_app.sh

**This script requires path adaption to your system!**

Helper script to speed up the process between changing the pyjnius code and having an app using the changed pyjnius lib by doing the following:
  - Recompiles python and pyjnius
  - Injects the generated libraries into pydroid
  - Removes previous pyjnius_example if any from test_dir
  - Creates a new pyjnius_example app
  - Deploys the app to the device
  - Creates a backup of the deploy.conf file for later restore.

You need python-for-android (branch: "minimal") for building libraries with this script:

    git clone https://github.com/d3vgru/python-for-android
    git checkout -b minimal remotes/origin/minimal

Example usage:

    ./compile_pyjnius_and_create_app.sh


### copy_kivy_libs.sh

**This script requires path adaption to your system!**

Injects libraries generated by kivy's distribute.sh script into pydroid in
general or into a specific pydroid app.

Example usage:

    ./copy_kivy_libs.sh


Library cleanup scripts
-----------------------

### cleanup_python_lib.sh

Removes unnecessary files and directories from the python library.

Example usage:

    ./cleanup_python_lib.sh


### strip_binaries.sh

Strips all binaries in the pydroid folder.

Example usage:

    ./strip_binaries.sh


Testing
-------

### test_installation.py

Tests if using pydroid via python API by creating and deploying an app works.
This test will fail, if you installed pydroid by using the install_pydroid_editable.py script.

Example usage:

    ./test_installation.py

